!function(a){"function"==typeof define&&define.amd?define(["jquery","block_filescan/jquery.dataTables"],function(b){return a(b,window,document)}):"object"==typeof exports?module.exports=function(b,c){return b||(b=window),c&&c.fn.dataTable||(c=require("datatables.net")(b,c).$),a(c,b,b.document)}:a(jQuery,window,document)}(function(a,b,c,d){"use strict";function e(a,b,c){var d,e,f,g=function(b,c){if(b>c){var d=c;c=b,b=d}var e=!1;return a.columns(":visible").indexes().filter(function(a){return a===b&&(e=!0),a===c?(e=!1,!0):e})},h=function(b,c){var d=a.rows({search:"applied"}).indexes();if(d.indexOf(b)>d.indexOf(c)){var e=c;c=b,b=e}var f=!1;return d.filter(function(a){return a===b&&(f=!0),a===c?(f=!1,!0):f})};a.cells({selected:!0}).any()||c?(e=g(c.column,b.column),f=h(c.row,b.row)):(e=g(0,b.column),f=h(0,b.row)),d=a.cells(f,e).flatten(),a.cells(b,{selected:!0}).any()?a.cells(d).deselect():a.cells(d).select()}function f(b){var c=b.settings()[0],d=c._select.selector;a(b.table().container()).off("mousedown.dtSelect",d).off("mouseup.dtSelect",d).off("click.dtSelect",d),a("body").off("click.dtSelect"+n(b.table().node()))}function g(c){var d,e=a(c.table().container()),f=c.settings()[0],g=f._select.selector;e.on("mousedown.dtSelect",g,function(a){(a.shiftKey||a.metaKey||a.ctrlKey)&&e.css("-moz-user-select","none").one("selectstart.dtSelect",g,function(){return!1}),b.getSelection&&(d=b.getSelection())}).on("mouseup.dtSelect",g,function(){e.css("-moz-user-select","")}).on("click.dtSelect",g,function(e){var f,g=c.select.items();if(d){var i=b.getSelection();if((!i.anchorNode||a(i.anchorNode).closest("table")[0]===c.table().node())&&i!==d)return}var j=c.settings()[0],k=a.trim(c.settings()[0].oClasses.sWrapper).replace(/ +/g,".");if(a(e.target).closest("div."+k)[0]==c.table().container()){var l=c.cell(a(e.target).closest("td, th"));if(l.any()){var n=a.Event("user-select.dt");if(h(c,n,[g,l,e]),!n.isDefaultPrevented()){var o=l.index();"row"===g?(f=o.row,m(e,c,j,"row",f)):"column"===g?(f=l.index().column,m(e,c,j,"column",f)):"cell"===g&&(f=l.index(),m(e,c,j,"cell",f)),j._select_lastCell=o}}}}),a("body").on("click.dtSelect"+n(c.table().node()),function(b){if(f._select.blurable){if(a(b.target).parents().filter(c.table().container()).length)return;if(0===a(b.target).parents("html").length)return;if(a(b.target).parents("div.DTE").length)return;l(f,!0)}})}function h(b,c,d,e){e&&!b.flatten().length||("string"==typeof c&&(c+=".dt"),d.unshift(b),a(b.table().node()).trigger(c,d))}function i(b){var c=b.settings()[0];if(c._select.info&&c.aanFeatures.i&&"api"!==b.select.style()){var d=b.rows({selected:!0}).flatten().length,e=b.columns({selected:!0}).flatten().length,f=b.cells({selected:!0}).flatten().length,g=function(c,d,e){c.append(a('<span class="select-item"/>').append(b.i18n("select."+d+"s",{_:"%d "+d+"s selected",0:"",1:"1 "+d+" selected"},e)))};a.each(c.aanFeatures.i,function(b,c){c=a(c);var h=a('<span class="select-info"/>');g(h,"row",d),g(h,"column",e),g(h,"cell",f);var i=c.children("span.select-info");i.length&&i.remove(),""!==h.text()&&c.append(h)})}}function j(b){var c=new r.Api(b);b.aoRowCreatedCallback.push({fn:function(c,d,e){var f,g,h=b.aoData[e];for(h._select_selected&&a(c).addClass(b._select.className),f=0,g=b.aoColumns.length;f<g;f++)(b.aoColumns[f]._select_selected||h._selected_cells&&h._selected_cells[f])&&a(h.anCells[f]).addClass(b._select.className)},sName:"select-deferRender"}),c.on("preXhr.dt.dtSelect",function(){var a=c.rows({selected:!0}).ids(!0).filter(function(a){return a!==d}),b=c.cells({selected:!0}).eq(0).map(function(a){var b=c.row(a.row).id(!0);return b?{row:b,column:a.column}:d}).filter(function(a){return a!==d});c.one("draw.dt.dtSelect",function(){c.rows(a).select(),b.any()&&b.each(function(a){c.cells(a.row,a.column).select()})})}),c.on("draw.dtSelect.dt select.dtSelect.dt deselect.dtSelect.dt info.dt",function(){i(c)}),c.on("destroy.dtSelect",function(){f(c),c.off(".dtSelect")})}function k(b,c,d,e){var f=b[c+"s"]({search:"applied"}).indexes(),g=a.inArray(e,f),h=a.inArray(d,f);if(b[c+"s"]({selected:!0}).any()||g!==-1){if(g>h){var i=h;h=g,g=i}f.splice(h+1,f.length),f.splice(0,g)}else f.splice(a.inArray(d,f)+1,f.length);b[c](d,{selected:!0}).any()?(f.splice(a.inArray(d,f),1),b[c+"s"](f).deselect()):b[c+"s"](f).select()}function l(a,b){if(b||"single"===a._select.style){var c=new r.Api(a);c.rows({selected:!0}).deselect(),c.columns({selected:!0}).deselect(),c.cells({selected:!0}).deselect()}}function m(a,b,c,d,f){var g=b.select.style(),h=b.select.toggleable(),i=b[d](f,{selected:!0}).any();if(!i||h)if("os"===g)if(a.ctrlKey||a.metaKey)b[d](f).select(!i);else if(a.shiftKey)"cell"===d?e(b,f,c._select_lastCell||null):k(b,d,f,c._select_lastCell?c._select_lastCell[d]:null);else{var j=b[d+"s"]({selected:!0});i&&1===j.flatten().length?b[d](f).deselect():(j.deselect(),b[d](f).select())}else"multi+shift"==g&&a.shiftKey?"cell"===d?e(b,f,c._select_lastCell||null):k(b,d,f,c._select_lastCell?c._select_lastCell[d]:null):b[d](f).select(!i)}function n(a){return a.id.replace(/[^a-zA-Z0-9\-\_]/g,"-")}function o(a,b){return function(c){return c.i18n("buttons."+a,b)}}function p(a){var b=a._eventNamespace;return"draw.dt.DT"+b+" select.dt.DT"+b+" deselect.dt.DT"+b}function q(b,c){return!(a.inArray("rows",c.limitTo)===-1||!b.rows({selected:!0}).any())||(!(a.inArray("columns",c.limitTo)===-1||!b.columns({selected:!0}).any())||!(a.inArray("cells",c.limitTo)===-1||!b.cells({selected:!0}).any()))}var r=a.fn.dataTable;r.select={},r.select.version="1.3.1",r.select.init=function(b){var c=b.settings()[0],e=c.oInit.select,f=r.defaults.select,g=e===d?f:e,h="row",i="api",j=!1,k=!0,l=!0,m="td, th",n="selected",o=!1;c._select={},g===!0?(i="os",o=!0):"string"==typeof g?(i=g,o=!0):a.isPlainObject(g)&&(g.blurable!==d&&(j=g.blurable),g.toggleable!==d&&(k=g.toggleable),g.info!==d&&(l=g.info),g.items!==d&&(h=g.items),g.style!==d?(i=g.style,o=!0):(i="os",o=!0),g.selector!==d&&(m=g.selector),g.className!==d&&(n=g.className)),b.select.selector(m),b.select.items(h),b.select.style(i),b.select.blurable(j),b.select.toggleable(k),b.select.info(l),c._select.className=n,a.fn.dataTable.ext.order["select-checkbox"]=function(b,c){return this.api().column(c,{order:"index"}).nodes().map(function(c){return"row"===b._select.items?a(c).parent().hasClass(b._select.className):"cell"===b._select.items&&a(c).hasClass(b._select.className)})},!o&&a(b.table().node()).hasClass("selectable")&&b.select.style("os")},a.each([{type:"row",prop:"aoData"},{type:"column",prop:"aoColumns"}],function(a,b){r.ext.selector[b.type].push(function(a,c,d){var e,f=c.selected,g=[];if(f!==!0&&f!==!1)return d;for(var h=0,i=d.length;h<i;h++)e=a[b.prop][d[h]],(f===!0&&e._select_selected===!0||f===!1&&!e._select_selected)&&g.push(d[h]);return g})}),r.ext.selector.cell.push(function(a,b,c){var e,f=b.selected,g=[];if(f===d)return c;for(var h=0,i=c.length;h<i;h++)e=a.aoData[c[h].row],(f===!0&&e._selected_cells&&e._selected_cells[c[h].column]===!0||f===!1&&(!e._selected_cells||!e._selected_cells[c[h].column]))&&g.push(c[h]);return g});var s=r.Api.register,t=r.Api.registerPlural;s("select()",function(){return this.iterator("table",function(a){r.select.init(new r.Api(a))})}),s("select.blurable()",function(a){return a===d?this.context[0]._select.blurable:this.iterator("table",function(b){b._select.blurable=a})}),s("select.toggleable()",function(a){return a===d?this.context[0]._select.toggleable:this.iterator("table",function(b){b._select.toggleable=a})}),s("select.info()",function(a){return i===d?this.context[0]._select.info:this.iterator("table",function(b){b._select.info=a})}),s("select.items()",function(a){return a===d?this.context[0]._select.items:this.iterator("table",function(b){b._select.items=a,h(new r.Api(b),"selectItems",[a])})}),s("select.style()",function(a){return a===d?this.context[0]._select.style:this.iterator("table",function(b){b._select.style=a,b._select_init||j(b);var c=new r.Api(b);f(c),"api"!==a&&g(c),h(new r.Api(b),"selectStyle",[a])})}),s("select.selector()",function(a){return a===d?this.context[0]._select.selector:this.iterator("table",function(b){f(new r.Api(b)),b._select.selector=a,"api"!==b._select.style&&g(new r.Api(b))})}),t("rows().select()","row().select()",function(b){var c=this;return b===!1?this.deselect():(this.iterator("row",function(b,c){l(b),b.aoData[c]._select_selected=!0,a(b.aoData[c].nTr).addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["row",c[b]],!0)}),this)}),t("columns().select()","column().select()",function(b){var c=this;return b===!1?this.deselect():(this.iterator("column",function(b,c){l(b),b.aoColumns[c]._select_selected=!0;var d=new r.Api(b).column(c);a(d.header()).addClass(b._select.className),a(d.footer()).addClass(b._select.className),d.nodes().to$().addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["column",c[b]],!0)}),this)}),t("cells().select()","cell().select()",function(b){var c=this;return b===!1?this.deselect():(this.iterator("cell",function(b,c,e){l(b);var f=b.aoData[c];f._selected_cells===d&&(f._selected_cells=[]),f._selected_cells[e]=!0,f.anCells&&a(f.anCells[e]).addClass(b._select.className)}),this.iterator("table",function(a,b){h(c,"select",["cell",c[b]],!0)}),this)}),t("rows().deselect()","row().deselect()",function(){var b=this;return this.iterator("row",function(b,c){b.aoData[c]._select_selected=!1,a(b.aoData[c].nTr).removeClass(b._select.className)}),this.iterator("table",function(a,c){h(b,"deselect",["row",b[c]],!0)}),this}),t("columns().deselect()","column().deselect()",function(){var b=this;return this.iterator("column",function(b,c){b.aoColumns[c]._select_selected=!1;var d=new r.Api(b),e=d.column(c);a(e.header()).removeClass(b._select.className),a(e.footer()).removeClass(b._select.className),d.cells(null,c).indexes().each(function(c){var d=b.aoData[c.row],e=d._selected_cells;!d.anCells||e&&e[c.column]||a(d.anCells[c.column]).removeClass(b._select.className)})}),this.iterator("table",function(a,c){h(b,"deselect",["column",b[c]],!0)}),this}),t("cells().deselect()","cell().deselect()",function(){var b=this;return this.iterator("cell",function(b,c,d){var e=b.aoData[c];e._selected_cells[d]=!1,e.anCells&&!b.aoColumns[d]._select_selected&&a(e.anCells[d]).removeClass(b._select.className)}),this.iterator("table",function(a,c){h(b,"deselect",["cell",b[c]],!0)}),this});var u=0;return a.extend(r.ext.buttons,{selected:{text:o("selected","Selected"),className:"buttons-selected",limitTo:["rows","columns","cells"],init:function(a,b,c){var d=this;c._eventNamespace=".select"+u++,a.on(p(c),function(){d.enable(q(a,c))}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectedSingle:{text:o("selectedSingle","Selected single"),className:"buttons-selected-single",init:function(a,b,c){var d=this;c._eventNamespace=".select"+u++,a.on(p(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(1===b)}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}},selectAll:{text:o("selectAll","Select all"),className:"buttons-select-all",action:function(){var a=this.select.items();this[a+"s"]().select()}},selectNone:{text:o("selectNone","Deselect all"),className:"buttons-select-none",action:function(){l(this.settings()[0],!0)},init:function(a,b,c){var d=this;c._eventNamespace=".select"+u++,a.on(p(c),function(){var b=a.rows({selected:!0}).flatten().length+a.columns({selected:!0}).flatten().length+a.cells({selected:!0}).flatten().length;d.enable(b>0)}),this.disable()},destroy:function(a,b,c){a.off(c._eventNamespace)}}}),a.each(["Row","Column","Cell"],function(a,b){var c=b.toLowerCase();r.ext.buttons["select"+b+"s"]={text:o("select"+b+"s","Select "+c+"s"),className:"buttons-select-"+c+"s",action:function(){this.select.items(c)},init:function(a){var b=this;a.on("selectItems.dt.DT",function(a,d,e){b.active(e===c)})}}}),a(c).on("preInit.dt.dtSelect",function(a,b){"dt"===a.namespace&&r.select.init(new r.Api(b))}),r.select});